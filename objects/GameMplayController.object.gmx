<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>Ctrl_Spr_Mplay</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// use non guaranteed messaging to speed up things
  mplay_data_mode(false);

global.polop1x=0
global.polop1y=0
global.polop2x=0
global.polop2y=0
global.p1score=0
global.p2score=0
global.msg=0

typing=0
typed=0

alpha1=0
test=0
alerted=0
alerted2=0


// CHAT

// initialize the text
  script_initlines();
  keyboard_string = ''; 
// find out who is around
  n = mplay_player_find();
  if (n &lt;= 1)
  {
//    script_addline('No other people are around in this chatroom.',c_red);
  }
  else
  {
//    str := 'Currently present: ';
//    for (i=1; i&lt;n; i+=1) str += mplay_player_name(i) + '  ';
//    script_addline(str,c_red);
  } 
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>test=""
mplay_message_send(0,10,test);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if alpha1&gt;0{alpha1-=0.03}

// Handle messages
  while (mplay_message_receive(0))
  {
    messid = mplay_message_id();
    val = mplay_message_value();
    // Check for Polo location changes
      if (!global.master){
    if (messid == 2) global.polop1x = val;
    if (messid == 3) global.polop1y = val;}
      if (global.master){
    if (messid == 4) global.polop2x = val;
    if (messid == 5) global.polop2y = val;}
      if (!global.master){ //p2
    if (messid == 6) global.p1score = val;}
      if (global.master){ //p1
    if (messid == 7) global.p2score = val;}
      if (!global.master){ //p2
    if (messid == 8) global.p1_location = val;}
      if (global.master){ //p1
    if (messid == 9) global.p2_location = val;}
    if (messid == 10) global.msg = val;
      if (!global.master){ //p2
    if (messid == 11) global.p1sprite = val;}
      if (global.master){ //p1
    if (messid == 12) global.p2sprite = val;}
      if (!global.master){ //p2
    if (messid == 13) global.p1image_index = val;}
      if (global.master){ //p1
    if (messid == 14) global.p2image_index = val;}
//      if (!global.master){ //p2
//    if (messid == 15) global.p1overallscore = val;}
//      if (global.master){ //p1
//    if (messid == 16) global.p2overallscore = val;}
    if (messid == 17)
      script_addline(mplay_message_name() + ': ' + mplay_message_value(),c_yellow);
    if (messid == 18)
    {if mplay_message_value()="/left"
    {polo.bubbleIndex2=0
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/right"
    {polo.bubbleIndex2=1
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/up"
    {polo.bubbleIndex2=2
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/down"
    {polo.bubbleIndex2=3
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/happy"
    {polo.bubbleIndex2=4
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/sad"
    {polo.bubbleIndex2=5
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/yes"
    {polo.bubbleIndex2=6
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/no"
    {polo.bubbleIndex2=7
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/!"
    {polo.bubbleIndex2=8
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/?"
    {polo.bubbleIndex2=9
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/coin"
    {polo.bubbleIndex2=10
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/monster"
    {polo.bubbleIndex2=11
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/polo"
    {polo.bubbleIndex2=12
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/wat"
    {polo.bubbleIndex2=13
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/hi"
    {polo.bubbleIndex2=14
    polo.bubbleAlpha2=3
    exit}
    if mplay_message_value()="/stupid"
    {polo.bubbleIndex2=20
    polo.bubbleAlpha2=3
    exit}

    
    
    
    script_addline(mplay_message_value(),c_lime);}
  }

  
//    if (mplay_message_receive(0))
//  {
    // normal messages
//  }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Check whether the other player did not stop
  if (global.master)
  if mplay_player_find()&gt;global.init_players
  if global.mplay=1 and alerted2=0{
  script_addline(string(mplay_player_name(1))+" is trying to join. Type /invite.",c_aqua);alerted2=1}
  if (mplay_player_find() &lt; 2) and alerted=0
  {
    //show_message('Other player has left the game. Your session will continue as normal.');
    alerted=1
//    mplay_session_end();
//    game_restart(); //Replace with one ALERT and None there after. Also, Dont force disconnect client / host.
  }

    if keyboard_check(vk_tab){
    if alpha1&lt;1{alpha1+=0.03}}
    if keyboard_check_released(vk_tab){
    if alpha1&gt;0{alpha1-=0.04}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="112">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if alpha1&lt;1{alpha1+=0.08}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>  script_drawlines(view_xview+8,view_yview+64+100);
  draw_set_color(c_yellow);
  draw_set_alpha(1);
  draw_set_font(fnt_bold);
  draw_set_halign(fa_left);
  if typing=1
  draw_text(view_xview+8,view_yview+114+100,keyboard_string +'|');
  
  
  draw_set_alpha(alpha1);
  draw_set_color(c_black)
  draw_set_font(fnt_bold);
  draw_set_alpha(alpha1-0.4);
  draw_rectangle(view_xview+16,view_yview+64,view_xview+320-16,view_yview+240-64,0);
  draw_set_alpha(alpha1);
  draw_set_font(fnt_normal);
  draw_set_halign(fa_center);
  draw_set_color(c_white);
  draw_rectangle(view_xview+16,view_yview+64,view_xview+320-16,view_yview+240-64,1);
  draw_set_color(c_yellow);
  draw_text(view_xview+160,view_yview+68,"Online Multiplayer Info");
  draw_set_color(c_white);
  draw_set_halign(fa_left);
  draw_text(view_xview+18,view_yview+74+12,"Player Name   CURRENT LEVEL     LVL     OVERALL");
  draw_text(view_xview+18,view_yview+74+12+14,global.mplay_name);
  draw_text(view_xview+102,view_yview+74+12+14,global.p1_location);
  draw_set_halign(fa_center);
  draw_text(view_xview+215,view_yview+74+12+14,global.p1score);
  draw_text(view_xview+280,view_yview+74+12+14,global.p1overallscore);
  draw_set_halign(fa_left);
  draw_text(view_xview+18,view_yview+74+12+26,global.mplay_name);
  draw_text(view_xview+102,view_yview+74+12+26,global.p2_location);
  draw_set_halign(fa_center);
  draw_text(view_xview+215,view_yview+74+12+26,global.p2score);
  draw_text(view_xview+280,view_yview+74+12+26,global.p2overallscore);
  
   draw_set_halign(fa_left);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="84">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if typing=0{
  keyboard_string = '';
  typing=1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="75">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>sound_play(snd_connected);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>  if typing=1{
  typing=0
  script_addline(global.mplay_name+': '+keyboard_string,c_white);
  
  if keyboard_string='/left'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=0
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/right'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=1
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/up'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=2
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/down'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=3
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
    if keyboard_string='/happy'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=4
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/sad'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=5
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/yes'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=6
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/no'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=7
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/!'{ //WILL THIS FUCK?
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=8
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/?'{ //WILL THIS SHIT?
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=9
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/coin'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=10
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/monster'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=11
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/polo'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=12
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/wat'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=13
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/hi'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=14
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  if keyboard_string='/stupid'{
     mplay_message_send(0,18,keyboard_string); //img #4
     polo.bubbleIndex=20
     polo.bubbleAlpha=3
     keyboard_string = '';
     exit
  }
  
  if keyboard_string='/invite'{
  global.gamestart=1
  global.init_players+=1
  mplay_message_send(0,99,global.gamestart);
  if mplay_player_find()&lt;2{
  script_addline("There is no one pending to join.",c_aqua);}}
  
  mplay_message_send(0,17,keyboard_string);
  
  keyboard_string = '';
  }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="112">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if alpha1&gt;0{alpha1-=0.03}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
